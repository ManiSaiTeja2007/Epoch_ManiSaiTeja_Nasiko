<!-- templates/index.html -->
<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.5"
    />
    <title>{{ title }} v{{ version }}</title>

    <!-- Fonts -->
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Fira+Code:wght@400;500&display=swap"
      rel="stylesheet"
    />

    <!-- CSS -->
    <link rel="stylesheet" href="/static/css/styles.css" />
  </head>
  <body>
    <div class="container">
      <!-- Header -->
      <header class="header">
        <div class="header-content">
          <h1>ğŸ {{ title }}</h1>
          <p class="header-subtitle">
            Two AI Agents â€¢ Docstrings â€¢ README â€¢ ZIP Upload
          </p>
          <div class="header-badges">
            <span class="badge badge-primary">v{{ version }}</span>
            <span class="badge badge-secondary">{{ model }}</span>
            <span class="badge badge-success">ğŸ“¦ ZIP</span>
          </div>
        </div>
        <div class="header-stats">
          <div class="stat">
            <span class="stat-value">ğŸ“</span>
            <span class="stat-label">Docstring</span>
          </div>
          <div class="stat">
            <span class="stat-value">ğŸ“š</span>
            <span class="stat-label">README</span>
          </div>
          <div class="stat">
            <span class="stat-value">ğŸ“¦</span>
            <span class="stat-label">ZIP Upload</span>
          </div>
        </div>
      </header>

      <!-- Mode Toggle -->
      <div class="mode-toggle">
        <button class="mode-btn active" data-mode="docstring">
          <span class="mode-icon">ğŸ“</span>
          <span class="mode-text">Docstring Agent</span>
          <span class="mode-desc">Functions â€¢ Classes â€¢ Methods</span>
        </button>
        <button class="mode-btn" data-mode="readme">
          <span class="mode-icon">ğŸ“š</span>
          <span class="mode-text">README Agent</span>
          <span class="mode-desc">Projects â€¢ ZIP â€¢ Folder Path</span>
        </button>
      </div>

      <!-- Docstring Mode -->
      <div id="docstringMode" class="mode-panel active">
        <div class="panels">
          <!-- Input Panel -->
          <div class="panel panel-input">
            <div class="panel-header">
              <div class="panel-title">
                <span class="panel-icon">ğŸ“</span>
                <h2>Python Code</h2>
              </div>
              <div class="panel-actions">
                <button
                  class="btn btn-sm btn-secondary"
                  onclick="clearInput()"
                  title="Clear input"
                >
                  ğŸ—‘ï¸ Clear
                </button>
              </div>
            </div>
            <div class="panel-content">
              <textarea
                id="codeInput"
                class="code-input"
                placeholder="# Paste Python function, class, or method..."
                spellcheck="false"
              ></textarea>
            </div>
            <div class="panel-footer">
              <span class="keyboard-hint">
                <kbd>Ctrl</kbd> + <kbd>Enter</kbd>
              </span>
              <span id="inputStats" class="input-stats">0 lines</span>
            </div>
          </div>

          <!-- Output Panel -->
          <div class="panel panel-output">
            <div class="panel-header">
              <div class="panel-title">
                <span class="panel-icon">ğŸ“„</span>
                <h2>Google-Style Docstring</h2>
              </div>
              <div class="panel-actions">
                <span
                  id="elementBadge"
                  class="element-badge"
                  style="display: none"
                ></span>
                <button
                  id="copyBtn"
                  class="btn btn-sm btn-primary"
                  onclick="copyDocstring()"
                  style="display: none"
                >
                  ğŸ“‹ Copy
                </button>
              </div>
            </div>
            <div class="panel-content" id="outputContent">
              <div class="placeholder">
                <div class="placeholder-icon">âœ¨</div>
                <div class="placeholder-text">
                  Generated docstring will appear here
                </div>
                <div class="placeholder-hint">Ctrl+Enter to generate</div>
              </div>
            </div>
          </div>
        </div>

        <div class="controls">
          <button
            class="btn btn-lg btn-primary"
            onclick="generateDocstring()"
            id="generateBtn"
          >
            <span class="btn-icon">âœ¨</span>
            Generate Docstring
          </button>
          <button class="btn btn-lg btn-secondary" onclick="clearAll()">
            <span class="btn-icon">ğŸ—‘ï¸</span>
            Clear All
          </button>
          <button class="btn btn-lg btn-secondary" onclick="loadExample()">
            <span class="btn-icon">ğŸ“‹</span>
            Example
          </button>
        </div>
      </div>

      <!-- README Mode -->
      <div id="readmeMode" class="mode-panel">
        <div class="upload-container">
          <div class="upload-header">
            <h2>ğŸ“¦ Generate Project README</h2>
            <p class="upload-subtitle">Upload ZIP or enter folder path</p>
          </div>

          <div class="upload-methods">
            <!-- Method 1: ZIP Upload -->
            <div class="upload-method">
              <div class="method-icon">ğŸ“</div>
              <h3>Upload ZIP</h3>
              <p class="method-desc">Drag & drop or click to upload</p>

              <div class="upload-area" id="dropZone">
                <div class="upload-icon">ğŸ“¦</div>
                <div class="upload-text">
                  <span class="upload-main">Drop ZIP file here</span>
                  <span class="upload-or">or</span>
                  <button
                    class="btn btn-primary"
                    type="button"
                    onclick="document.getElementById('fileInput').click()"
                  >
                    Browse Files
                  </button>
                </div>
                <input type="file" id="fileInput" accept=".zip" hidden />
                <div class="upload-hint">Max: 50MB â€¢ All files analyzed</div>
              </div>

              <div
                id="uploadProgress"
                class="upload-progress"
                style="display: none"
              >
                <div class="progress-bar">
                  <div class="progress-fill" style="width: 0%"></div>
                </div>
                <div class="progress-status">Uploading...</div>
              </div>
            </div>

            <!-- Method 2: Folder Path -->
            <div class="upload-method">
              <div class="method-icon">ğŸ“</div>
              <h3>Folder Path</h3>
              <p class="method-desc">Enter absolute path to project</p>

              <div class="path-input-container">
                <input
                  type="text"
                  id="folderPathInput"
                  class="path-input"
                  placeholder="/home/user/project or C:\project"
                />
                <button
                  class="btn btn-primary"
                  onclick="generateReadmeFromPath()"
                  id="analyzePathBtn"
                >
                  <span class="btn-icon">ğŸ”</span>
                  Analyze
                </button>
              </div>
              <div class="path-hint">
                ğŸ’¡ Windows: C:\project â€¢ Mac/Linux: /home/user/project
              </div>
            </div>
          </div>

          <!-- Analysis Results -->
          <div
            id="analysisResults"
            class="analysis-results"
            style="display: none"
          >
            <div class="results-header">
              <h3>ğŸ“Š Project Analysis</h3>
              <div class="results-actions">
                <button
                  class="btn btn-sm btn-primary"
                  onclick="copyReadme()"
                  id="copyReadmeBtn"
                >
                  ğŸ“‹ Copy README
                </button>
                <button
                  class="btn btn-sm btn-success"
                  onclick="downloadReadme()"
                  id="downloadReadmeBtn"
                >
                  â¬‡ï¸ Download
                </button>
              </div>
            </div>

            <div id="projectStats" class="stats-grid"></div>

            <div class="readme-preview">
              <div class="preview-header">
                <span>ğŸ“„ README.md</span>
              </div>
              <div class="preview-content" id="readmeContent">
                <div class="placeholder">
                  <div class="placeholder-icon">â³</div>
                  <div class="placeholder-text">Processing project...</div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Status Messages -->
      <div id="statusMessage" class="status"></div>

      <!-- Footer -->
      <footer class="footer">
        <div class="footer-content">
          <p>Powered by <strong>Google Gemini</strong> â€¢ FastAPI â€¢ LangChain</p>
          <p class="footer-links">
            <a href="/docs" target="_blank">API Docs</a>
            <span class="separator">â€¢</span>
            <a href="/redoc" target="_blank">ReDoc</a>
            <span class="separator">â€¢</span>
            <a href="/health" target="_blank">Health</a>
            <span class="separator">â€¢</span>
            <span class="version">v{{ version }}</span>
          </p>
          <p class="footer-badges">
            <span class="badge badge-secondary">ğŸ“ Docstring Agent</span>
            <span class="badge badge-secondary">ğŸ“š README Agent</span>
            <span class="badge badge-secondary">ğŸ“¦ ZIP Upload</span>
          </p>
        </div>
      </footer>
    </div>

    <!-- JavaScript -->
    <script src="/static/js/app.js"></script>
  </body>
</html>
