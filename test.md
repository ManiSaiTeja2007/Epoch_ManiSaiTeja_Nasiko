# advanced-code-visualizer

## ğŸ“‹ Overview

The `advanced-code-visualizer` project is a sophisticated web application designed to empower developers with tools for interactive code execution, AI-driven code explanation, and insightful visualization. At its core, it provides a robust backend built with FastAPI and GraphQL, enabling a rich set of functionalities for managing and interacting with code snippets. Users can submit code for execution, receive detailed explanations generated by AI, and track their progress, all while benefiting from secure input handling and seamless integration with external services like GitHub.

The system leverages a GraphQL API, defined in `backend/schema.py`, to expose its capabilities through mutations like `ExecuteCode` for running code and `ExplainCode` for AI analysis. The `backend/resolvers.py` module houses the business logic for these operations, interacting with external AI models (via `google-generativeai`) and persistent storage (likely Firebase, given `pyrebase` dependency). The `backend/lambda_handler.py` acts as the primary entry point for API Gateway requests, routing them to the appropriate FastAPI or WebSocket endpoints, making it suitable for serverless deployments.

## âœ¨ Key Features

*   **Interactive Code Execution**: Submit code snippets in various languages for execution and receive results, powered by the `ExecuteCode` mutation and `execute_code_resolver`.
*   **AI-Powered Code Explanation**: Get detailed, AI-generated explanations for complex code, facilitated by the `ExplainCode` mutation and `explain_code_resolver` leveraging `google-generativeai`.
*   **Code Visualization**: Routes like `/viz` and `/output` in `backend/routes.py` suggest capabilities for visualizing code structure, execution flow, or results.
*   **User Progress Tracking**: Users can save and retrieve their progress and data through the `SaveProgress` mutation and `Query.resolve_user_progress`.
*   **GitHub Integration**: Link your GitHub account to the platform using the `LinkGitHub` mutation and `link_github_resolver` for potential repository analysis or code import.
*   **Secure Input Handling**: Utilizes `backend/utils.py` functions like `sanitize_input` (likely with `bleach`) and `validate_code_length` to ensure secure and valid code submissions.
*   **Real-time Interaction**: The `websocket_endpoint` in `backend/lambda_handler.py` indicates support for real-time communication, potentially for live execution feedback or collaborative features.

## ğŸ—ï¸ Architecture

The system is structured into a frontend client and a serverless-ready Python backend. The backend serves as an API gateway, orchestrating requests between the client, internal services, and external APIs.

```mermaid
C4Context
    title System Context Diagram for Advanced Code Visualizer

    Person(user, "User", "Developer interacting with the application")

    System(frontend, "Frontend Application", "Web-based UI for code editing, execution, explanation, and visualization (Next.js/React)")

    System_Boundary(backend, "Backend System") {
        Container(lambda_handler, "Lambda Handler", "Python FastAPI/GraphQL entry point for AWS Lambda. Routes HTTP and WebSocket requests.", "Python, FastAPI, Mangum")
        Container(graphql_api, "GraphQL API", "Defines the GraphQL schema (queries, mutations, types) and resolves requests.", "Python, Graphene, GraphQL")
        Container(rest_api, "REST API", "Provides specific REST endpoints for visualization, OpenAPI spec, etc.", "Python, FastAPI")
        Container(resolvers, "Resolvers", "Business logic for GraphQL operations, interacting with internal and external services.", "Python")
        Container(utils, "Utilities", "Common functions for input sanitization, validation, etc.", "Python, Bleach")
    }

    System(firebase, "Firebase", "Database for user progress, execution results, and other persistent data.", "NoSQL Database")
    System(google_ai, "Google Generative AI", "External AI service for code explanation.", "AI Service")
    System(github_api, "GitHub API", "External API for GitHub integration (linking accounts, repository access).", "REST API")

    Rel(user, frontend, "Interacts with")
    Rel(frontend, lambda_handler, "Sends HTTP/WebSocket requests to")
    Rel(lambda_handler, graphql_api, "Routes GraphQL requests to")
    Rel(lambda_handler, rest_api, "Routes REST requests to")
    Rel(graphql_api, resolvers, "Calls resolvers to fulfill queries/mutations")
    Rel(resolvers, firebase, "Reads from and writes to", "Stores user data, execution results")
    Rel(resolvers, google_ai, "Sends code for explanation to", "Receives explanations")
    Rel(resolvers, github_api, "Authenticates and retrieves data from", "Links GitHub accounts")
    Rel(resolvers, utils, "Utilizes for input processing")
```

## ğŸ“Š Data Flow

Let's trace the data flow for a typical "Execute Code" request:

```mermaid
sequenceDiagram
    participant User
    participant Frontend
    participant LambdaHandler as backend/lambda_handler.py
    participant GraphQLSchema as backend/schema.py
    participant Resolvers as backend/resolvers.py
    participant CodeExecutionLogic as Internal Logic
    participant Firebase

    User->>Frontend: Enters code and clicks "Execute"
    Frontend->>LambdaHandler: HTTP POST /graphql (GraphQL Mutation: ExecuteCode)
    activate LambdaHandler
    LambdaHandler->>GraphQLSchema: Routes GraphQL payload
    activate GraphQLSchema
    GraphQLSchema->>Resolvers: Calls ExecuteCode.mutate(info, code, lang)
    activate Resolvers
    Resolvers->>CodeExecutionLogic: Calls execute_code_resolver(parent, info, code, lang)
    activate CodeExecutionLogic
    CodeExecutionLogic->>CodeExecutionLogic: Executes code in a secure environment
    CodeExecutionLogic-->>Resolvers: Returns execution result (stdout, stderr, exit_code)
    deactivate CodeExecutionLogic
    Resolvers->>Firebase: Saves execution result and user progress via save_

## ğŸ“ Full Project Structure

```
ğŸ“ advanced-code-visualizer/
â”œâ”€â”€ ğŸ“„ Backend Request Handling Flow
â”œâ”€â”€ ğŸ“„ Code Execution and Visualization Flow
â”œâ”€â”€ ğŸ“„ GitHub Integration Flow
â”œâ”€â”€ ğŸ“„ next.config.js
â”œâ”€â”€ ğŸ“„ Overall System Architecture Flow
â”œâ”€â”€ ğŸ“„ package.json
â”œâ”€â”€ ğŸ“„ postcss.config.js
â”œâ”€â”€ ğŸ“„ README.md
â”œâ”€â”€ ğŸ“„ tailwind.config.js
â”œâ”€â”€ ğŸ“„ tsconfig.json
â”œâ”€â”€ ğŸ“ backend/
â”‚   â”œâ”€â”€ ğŸ“„ Dockerfile
â”‚   â”œâ”€â”€ ğŸ lambda_handler.py [1cls] [2fn]
â”‚   â”œâ”€â”€ ğŸ“„ requirements.txt
â”‚   â”œâ”€â”€ ğŸ resolvers.py [4fn]
â”‚   â”œâ”€â”€ ğŸ routes.py [4fn]
â”‚   â”œâ”€â”€ ğŸ schema.py [11cls] [10fn]
â”‚   â””â”€â”€ ğŸ utils.py [2fn]
â””â”€â”€ ğŸ“ src/
    â”œâ”€â”€ ğŸ“ app/
    â”‚   â”œâ”€â”€ ğŸ“ [locale]/
    â”‚   â”‚   â”œâ”€â”€ ğŸ“„ layout.tsx
    â”‚   â”‚   â””â”€â”€ ğŸ“„ page.tsx
    â”‚   â”œâ”€â”€ ğŸ“ analyzer/
    â”‚   â”‚   â””â”€â”€ ğŸ“ [lang]/
    â”‚   â”‚       â””â”€â”€ ğŸ“„ page.tsx
    â”‚   â”œâ”€â”€ ğŸ“ api/
    â”‚   â”‚   â””â”€â”€ ğŸ“ execute/
    â”‚   â”‚       â””â”€â”€ ğŸ“„ route.ts
    â”‚   â””â”€â”€ ğŸ“ visualizer/
    â”‚       â””â”€â”€ ğŸ“ [lang]/
    â”‚           â””â”€â”€ ğŸ“„ page.tsx
    â”œâ”€â”€ ğŸ“ components/
    â”‚   â”œâ”€â”€ ğŸ“ editor/
    â”‚   â”‚   â””â”€â”€ ğŸ“„ CodeEditor.tsx
    â”‚   â”œâ”€â”€ ğŸ“ layout/
    â”‚   â”‚   â”œâ”€â”€ ğŸ“„ Footer.tsx
    â”‚   â”‚   â””â”€â”€ ğŸ“„ Header.tsx
    â”‚   â””â”€â”€ ğŸ“ ui/
    â”‚       â”œâ”€â”€ ğŸ“„ AIExplanationButton.tsx
    â”‚       â”œâ”€â”€ ğŸ“„ Button.tsx
    â”‚       â”œâ”€â”€ ğŸ“„ ErrorBoundary.tsx
    â”‚       â”œâ”€â”€ ğŸ“„ GitHubInstructionsModal.tsx
    â”‚       â”œâ”€â”€ ğŸ“„ Input.tsx
    â”‚       â””â”€â”€ ğŸ“„ LangSelector.tsx
    â”œâ”€â”€ ğŸ“ features/
    â”‚   â”œâ”€â”€ ğŸ“ analyzer/
    â”‚   â”‚   â”œâ”€â”€ ğŸ“ components/
    â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“„ CallArrow.tsx
    â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“„ EdgeCaseSimulator.tsx
    â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“„ ErrorPanel.tsx
    â”‚   â”‚   â”œâ”€â”€ ğŸ“ hooks/
    â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“„ useAnalyzerCache.ts
    â”‚   â”‚   â””â”€â”€ ğŸ“ utils/
    â”‚   â”‚       â””â”€â”€ ğŸ“„ analyzerUtils.ts
    â”‚   â”œâ”€â”€ ğŸ“ common/
    â”‚   â”‚   â”œâ”€â”€ ğŸ“„ AlgoDetector.tsx
    â”‚   â”‚   â””â”€â”€ ğŸ“„ DSVisualizer.tsx
    â”‚   â””â”€â”€ ğŸ“ visualizer/
    â”‚       â”œâ”€â”€ ğŸ“ components/
    â”‚       â”‚   â”œâ”€â”€ ğŸ“„ C4Diagram.tsx
    â”‚       â”‚   â”œâ”€â”€ ğŸ“„ DependencyGraph.tsx
    â”‚       â”‚   â””â”€â”€ ğŸ“„ ExecutionFlowDiagram.tsx
    â”‚       â”œâ”€â”€ ğŸ“ hooks/
    â”‚       â”‚   â””â”€â”€ ğŸ“„ useVisualizerState.ts
    â”‚       â””â”€â”€ ğŸ“ utils/
    â”‚           â””â”€â”€ ğŸ“„ vizUtils.ts
    â”œâ”€â”€ ğŸ“ hooks/
    â”‚   â”œâ”€â”€ ğŸ“„ useAstParser.ts
    â”‚   â”œâ”€â”€ ğŸ“„ useCodeExecution.ts
    â”‚   â”œâ”€â”€ ğŸ“„ useDebounce.ts
    â”‚   â”œâ”€â”€ ğŸ“„ useExportGraph.ts
    â”‚   â”œâ”€â”€ ğŸ“„ useFlowGraphBuilder.ts
    â”‚   â”œâ”€â”€ ğŸ“„ useGitHubIntegration.ts
    â”‚   â”œâ”€â”€ ğŸ“„ useStaticAnalyzer.ts
    â”‚   â”œâ”€â”€ ğŸ“„ useThemeToggle.ts
    â”‚   â”œâ”€â”€ ğŸ“„ useTracer.ts
    â”‚   â”œâ”€â”€ ğŸ“„ useUndoRedo.ts
    â”‚   â””â”€â”€ ğŸ“„ useVisualization.ts
    â”œâ”€â”€ ğŸ“ i18n/
    â”‚   â”œâ”€â”€ ğŸ“„ request.ts
    â”‚   â””â”€â”€ ğŸ“ messages/
    â”‚       â”œâ”€â”€ ğŸ“„ en.json
    â”‚       â””â”€â”€ ğŸ“„ es.json
    â”œâ”€â”€ ğŸ“ lib/
    â”‚   â”œâ”€â”€ ğŸ“„ algoPatterns.ts
    â”‚   â”œâ”€â”€ ğŸ“„ Config.ts
    â”‚   â”œâ”€â”€ ğŸ“„ dsDetector.ts
    â”‚   â”œâ”€â”€ ğŸ“„ Logging.ts
    â”‚   â”œâ”€â”€ ğŸ“„ multiFileResolver.ts
    â”‚   â”œâ”€â”€ ğŸ“„ tunnelUtils.ts
    â”‚   â”œâ”€â”€ ğŸ“„ utils.ts
    â”‚   â”œâ”€â”€ ğŸ“ graph-generators/
    â”‚   â”‚   â”œâ”€â”€ ğŸ“„ c4Generator.ts
    â”‚   â”‚   â”œâ”€â”€ ğŸ“„ callGraph.ts
    â”‚   â”‚   â”œâ”€â”€ ğŸ“„ dependencyGraph.ts
    â”‚   â”‚   â””â”€â”€ ğŸ“„ umlGenerator.ts
    â”‚   â”œâ”€â”€ ğŸ“ parsers/
    â”‚   â”‚   â”œâ”€â”€ ğŸ“„ langParsers.ts
    â”‚   â”‚   â””â”€â”€ ğŸ“„ treeSitterInit.ts
    â”‚   â”œâ”€â”€ ğŸ“ static-checkers/
    â”‚   â”‚   â””â”€â”€ ğŸ“„ pythonStatic.ts
    â”‚   â””â”€â”€ ğŸ“ tracers/
    â”‚       â””â”€â”€ ğŸ“„ pythonTracer.ts
    â”œâ”€â”€ ğŸ“ styles/
    â”‚   â””â”€â”€ ğŸ“„ globals.css
    â””â”€â”€ ğŸ“ types/
        â””â”€â”€ ğŸ“„ index.ts
```
